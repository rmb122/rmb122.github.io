---
title: "对聊天室做的一些微小的工作"
date: 2018-02-22 15:46:00
tags: [misc, python]
---

1. 对数据做了格式化处理, 所有数据都是以下格式, 但是 load 内的内容可以是任意json (字符串, 数组, 字典等), 且会被 AES 加密.

```json
example = {
    "key": "",  //RSA加密后的AESKey
    "load": {
        "msgType": "",
        "example": ""
    },
    "timeStamp": "",
    "sign": "", 
}
```

<!-- more -->

2. 对 socket 做了简单的封装, 现在拥有心跳包机制 (TCP 自带的心跳包实在不好用) 以及对长数据的分包发送. 

3. 增加了数据库部分, 私钥相当于密码, 通过签名验证登陆. 

4. 数据在发送时会被压缩以节省流量.且因为 load 中的内容是用 AES 加密的, 也就是说其中的长度是不做限制, 可以用来进行传输文件等等 (当然我还没做233). 